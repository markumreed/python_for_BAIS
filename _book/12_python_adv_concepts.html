<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.45">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>13&nbsp; Advanced Python Concepts – Python for Business Analytics and Informaton Systems</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./13_python_lib_for_sys_design.html" rel="next">
<link href="./11_python_testing.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./12_python_adv_concepts.html"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Advanced Python Concepts</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Python for Business Analytics and Informaton Systems</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_python_install_env_setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Installing Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_python_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Python Programming Basics for Business</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_python_control_structures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Python Control Structures for Business Applications</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_python_functions_modules.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Introduction to Python Functions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_python_data_handling_file_io.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Introduction to Data Handling and File I/O in Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_python_error_handling_debugging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Introduction to Error Handling and Debugging in Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07_python_oop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Introduction to Object-Oriented Programming with Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08_python_database_interaction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Introduction to Database Interaction with Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09_python_api_interaction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Introduction to API Interactions with Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_python_automated_sys_tasks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Introduction to Automating System Tasks with Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_python_testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Introduction to Testing in Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_python_adv_concepts.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Advanced Python Concepts</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13_python_lib_for_sys_design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Introduction to Python Libraries for System Design</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14_foundations_of_data_comm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Foundations of Data Communication with Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15_network_architecture_protocols.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Network Architecture and Protocols with Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16_network_services_mgmt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Network Services and Management with Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17_adv_network_concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Advanced Networking Concepts with Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18_modern_network_practices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Modern Network Practices with Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A1_version_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Introduction to Version Control</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A2_docker.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Using Docker</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#asynchronous-programming-with-asyncio" id="toc-asynchronous-programming-with-asyncio" class="nav-link active" data-scroll-target="#asynchronous-programming-with-asyncio"><span class="header-section-number">13.0.1</span> Asynchronous Programming with <code>asyncio</code></a></li>
  <li><a href="#decorators" id="toc-decorators" class="nav-link" data-scroll-target="#decorators"><span class="header-section-number">13.0.2</span> Decorators</a></li>
  <li><a href="#generators" id="toc-generators" class="nav-link" data-scroll-target="#generators"><span class="header-section-number">13.0.3</span> Generators</a></li>
  <li><a href="#context-managers" id="toc-context-managers" class="nav-link" data-scroll-target="#context-managers"><span class="header-section-number">13.0.4</span> Context Managers</a></li>
  <li><a href="#putting-it-all-together" id="toc-putting-it-all-together" class="nav-link" data-scroll-target="#putting-it-all-together"><span class="header-section-number">13.0.5</span> Putting It All Together</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">13.0.6</span> Conclusion</a></li>
  <li><a href="#deep-dive-into-the-asyncio-module-in-python" id="toc-deep-dive-into-the-asyncio-module-in-python" class="nav-link" data-scroll-target="#deep-dive-into-the-asyncio-module-in-python"><span class="header-section-number">14</span> Deep Dive into the <code>asyncio</code> Module in Python</a>
  <ul class="collapse">
  <li><a href="#table-of-contents" id="toc-table-of-contents" class="nav-link" data-scroll-target="#table-of-contents"><span class="header-section-number">14.1</span> Table of Contents</a></li>
  <li><a href="#introduction-to-asynchronous-programming" id="toc-introduction-to-asynchronous-programming" class="nav-link" data-scroll-target="#introduction-to-asynchronous-programming"><span class="header-section-number">14.2</span> Introduction to Asynchronous Programming</a></li>
  <li><a href="#key-concepts" id="toc-key-concepts" class="nav-link" data-scroll-target="#key-concepts"><span class="header-section-number">14.3</span> Key Concepts</a></li>
  <li><a href="#basic-usage" id="toc-basic-usage" class="nav-link" data-scroll-target="#basic-usage"><span class="header-section-number">14.4</span> Basic Usage</a>
  <ul class="collapse">
  <li><a href="#example-running-a-simple-coroutine" id="toc-example-running-a-simple-coroutine" class="nav-link" data-scroll-target="#example-running-a-simple-coroutine"><span class="header-section-number">14.4.1</span> Example: Running a Simple Coroutine</a></li>
  </ul></li>
  <li><a href="#tasks-and-coroutines" id="toc-tasks-and-coroutines" class="nav-link" data-scroll-target="#tasks-and-coroutines"><span class="header-section-number">14.5</span> Tasks and Coroutines</a>
  <ul class="collapse">
  <li><a href="#creating-and-running-multiple-coroutines" id="toc-creating-and-running-multiple-coroutines" class="nav-link" data-scroll-target="#creating-and-running-multiple-coroutines"><span class="header-section-number">14.5.1</span> Creating and Running Multiple Coroutines</a></li>
  </ul></li>
  <li><a href="#managing-tasks" id="toc-managing-tasks" class="nav-link" data-scroll-target="#managing-tasks"><span class="header-section-number">14.6</span> Managing Tasks</a>
  <ul class="collapse">
  <li><a href="#creating-and-cancelling-tasks" id="toc-creating-and-cancelling-tasks" class="nav-link" data-scroll-target="#creating-and-cancelling-tasks"><span class="header-section-number">14.6.1</span> Creating and Cancelling Tasks</a></li>
  </ul></li>
  <li><a href="#synchronization-primitives" id="toc-synchronization-primitives" class="nav-link" data-scroll-target="#synchronization-primitives"><span class="header-section-number">14.7</span> Synchronization Primitives</a>
  <ul class="collapse">
  <li><a href="#using-locks" id="toc-using-locks" class="nav-link" data-scroll-target="#using-locks"><span class="header-section-number">14.7.1</span> Using Locks</a></li>
  </ul></li>
  <li><a href="#asynchronous-io" id="toc-asynchronous-io" class="nav-link" data-scroll-target="#asynchronous-io"><span class="header-section-number">14.8</span> Asynchronous I/O</a>
  <ul class="collapse">
  <li><a href="#example-asynchronous-file-io" id="toc-example-asynchronous-file-io" class="nav-link" data-scroll-target="#example-asynchronous-file-io"><span class="header-section-number">14.8.1</span> Example: Asynchronous File I/O</a></li>
  </ul></li>
  <li><a href="#creating-a-simple-web-server" id="toc-creating-a-simple-web-server" class="nav-link" data-scroll-target="#creating-a-simple-web-server"><span class="header-section-number">14.9</span> Creating a Simple Web Server</a>
  <ul class="collapse">
  <li><a href="#example-simple-http-server-with-aiohttp" id="toc-example-simple-http-server-with-aiohttp" class="nav-link" data-scroll-target="#example-simple-http-server-with-aiohttp"><span class="header-section-number">14.9.1</span> Example: Simple HTTP Server with <code>aiohttp</code></a></li>
  </ul></li>
  <li><a href="#best-practices" id="toc-best-practices" class="nav-link" data-scroll-target="#best-practices"><span class="header-section-number">14.10</span> Best Practices</a></li>
  <li><a href="#conclusion-1" id="toc-conclusion-1" class="nav-link" data-scroll-target="#conclusion-1"><span class="header-section-number">14.11</span> Conclusion</a></li>
  </ul></li>
  <li><a href="#deep-dive-into-python-decorators" id="toc-deep-dive-into-python-decorators" class="nav-link" data-scroll-target="#deep-dive-into-python-decorators"><span class="header-section-number">15</span> Deep Dive into Python Decorators</a>
  <ul class="collapse">
  <li><a href="#table-of-contents-1" id="toc-table-of-contents-1" class="nav-link" data-scroll-target="#table-of-contents-1"><span class="header-section-number">15.1</span> Table of Contents</a></li>
  <li><a href="#introduction-to-decorators" id="toc-introduction-to-decorators" class="nav-link" data-scroll-target="#introduction-to-decorators"><span class="header-section-number">15.2</span> Introduction to Decorators</a>
  <ul class="collapse">
  <li><a href="#basic-decorator-example" id="toc-basic-decorator-example" class="nav-link" data-scroll-target="#basic-decorator-example"><span class="header-section-number">15.2.1</span> Basic Decorator Example</a></li>
  </ul></li>
  <li><a href="#function-decorators" id="toc-function-decorators" class="nav-link" data-scroll-target="#function-decorators"><span class="header-section-number">15.3</span> Function Decorators</a>
  <ul class="collapse">
  <li><a href="#creating-and-using-function-decorators" id="toc-creating-and-using-function-decorators" class="nav-link" data-scroll-target="#creating-and-using-function-decorators"><span class="header-section-number">15.3.1</span> Creating and Using Function Decorators</a></li>
  <li><a href="#decorating-functions-with-arguments" id="toc-decorating-functions-with-arguments" class="nav-link" data-scroll-target="#decorating-functions-with-arguments"><span class="header-section-number">15.3.2</span> Decorating Functions with Arguments</a></li>
  <li><a href="#passing-arguments-to-decorators" id="toc-passing-arguments-to-decorators" class="nav-link" data-scroll-target="#passing-arguments-to-decorators"><span class="header-section-number">15.3.3</span> Passing Arguments to Decorators</a></li>
  </ul></li>
  <li><a href="#class-decorators" id="toc-class-decorators" class="nav-link" data-scroll-target="#class-decorators"><span class="header-section-number">15.4</span> Class Decorators</a>
  <ul class="collapse">
  <li><a href="#basic-class-decorator" id="toc-basic-class-decorator" class="nav-link" data-scroll-target="#basic-class-decorator"><span class="header-section-number">15.4.1</span> Basic Class Decorator</a></li>
  <li><a href="#using-class-decorators-to-modify-methods" id="toc-using-class-decorators-to-modify-methods" class="nav-link" data-scroll-target="#using-class-decorators-to-modify-methods"><span class="header-section-number">15.4.2</span> Using Class Decorators to Modify Methods</a></li>
  </ul></li>
  <li><a href="#using-multiple-decorators" id="toc-using-multiple-decorators" class="nav-link" data-scroll-target="#using-multiple-decorators"><span class="header-section-number">15.5</span> Using Multiple Decorators</a></li>
  <li><a href="#built-in-decorators" id="toc-built-in-decorators" class="nav-link" data-scroll-target="#built-in-decorators"><span class="header-section-number">15.6</span> Built-in Decorators</a>
  <ul class="collapse">
  <li><a href="#static-method" id="toc-static-method" class="nav-link" data-scroll-target="#static-method"><span class="header-section-number">15.6.1</span> Static Method</a></li>
  <li><a href="#class-method" id="toc-class-method" class="nav-link" data-scroll-target="#class-method"><span class="header-section-number">15.6.2</span> Class Method</a></li>
  <li><a href="#property" id="toc-property" class="nav-link" data-scroll-target="#property"><span class="header-section-number">15.6.3</span> Property</a></li>
  </ul></li>
  <li><a href="#practical-examples" id="toc-practical-examples" class="nav-link" data-scroll-target="#practical-examples"><span class="header-section-number">15.7</span> Practical Examples</a>
  <ul class="collapse">
  <li><a href="#logging-decorator" id="toc-logging-decorator" class="nav-link" data-scroll-target="#logging-decorator"><span class="header-section-number">15.7.1</span> Logging Decorator</a></li>
  <li><a href="#timing-decorator" id="toc-timing-decorator" class="nav-link" data-scroll-target="#timing-decorator"><span class="header-section-number">15.7.2</span> Timing Decorator</a></li>
  </ul></li>
  <li><a href="#best-practices-1" id="toc-best-practices-1" class="nav-link" data-scroll-target="#best-practices-1"><span class="header-section-number">15.8</span> Best Practices</a></li>
  <li><a href="#conclusion-2" id="toc-conclusion-2" class="nav-link" data-scroll-target="#conclusion-2"><span class="header-section-number">15.9</span> Conclusion</a></li>
  </ul></li>
  <li><a href="#deep-dive-into-python-generators" id="toc-deep-dive-into-python-generators" class="nav-link" data-scroll-target="#deep-dive-into-python-generators"><span class="header-section-number">16</span> Deep Dive into Python Generators</a>
  <ul class="collapse">
  <li><a href="#table-of-contents-2" id="toc-table-of-contents-2" class="nav-link" data-scroll-target="#table-of-contents-2"><span class="header-section-number">16.1</span> Table of Contents</a></li>
  <li><a href="#introduction-to-generators" id="toc-introduction-to-generators" class="nav-link" data-scroll-target="#introduction-to-generators"><span class="header-section-number">16.2</span> Introduction to Generators</a></li>
  <li><a href="#creating-generators" id="toc-creating-generators" class="nav-link" data-scroll-target="#creating-generators"><span class="header-section-number">16.3</span> Creating Generators</a>
  <ul class="collapse">
  <li><a href="#generator-functions" id="toc-generator-functions" class="nav-link" data-scroll-target="#generator-functions"><span class="header-section-number">16.3.1</span> Generator Functions</a></li>
  <li><a href="#generator-expressions-1" id="toc-generator-expressions-1" class="nav-link" data-scroll-target="#generator-expressions-1"><span class="header-section-number">16.3.2</span> Generator Expressions</a></li>
  </ul></li>
  <li><a href="#using-generators" id="toc-using-generators" class="nav-link" data-scroll-target="#using-generators"><span class="header-section-number">16.4</span> Using Generators</a></li>
  <li><a href="#the-yield-statement" id="toc-the-yield-statement" class="nav-link" data-scroll-target="#the-yield-statement"><span class="header-section-number">16.5</span> The <code>yield</code> Statement</a>
  <ul class="collapse">
  <li><a href="#example-fibonacci-sequence" id="toc-example-fibonacci-sequence" class="nav-link" data-scroll-target="#example-fibonacci-sequence"><span class="header-section-number">16.5.1</span> Example: Fibonacci Sequence</a></li>
  </ul></li>
  <li><a href="#advanced-generator-usage" id="toc-advanced-generator-usage" class="nav-link" data-scroll-target="#advanced-generator-usage"><span class="header-section-number">16.6</span> Advanced Generator Usage</a>
  <ul class="collapse">
  <li><a href="#sending-values-to-generators" id="toc-sending-values-to-generators" class="nav-link" data-scroll-target="#sending-values-to-generators"><span class="header-section-number">16.6.1</span> Sending Values to Generators</a></li>
  <li><a href="#throwing-exceptions-into-generators" id="toc-throwing-exceptions-into-generators" class="nav-link" data-scroll-target="#throwing-exceptions-into-generators"><span class="header-section-number">16.6.2</span> Throwing Exceptions into Generators</a></li>
  <li><a href="#closing-generators" id="toc-closing-generators" class="nav-link" data-scroll-target="#closing-generators"><span class="header-section-number">16.6.3</span> Closing Generators</a></li>
  </ul></li>
  <li><a href="#practical-examples-1" id="toc-practical-examples-1" class="nav-link" data-scroll-target="#practical-examples-1"><span class="header-section-number">16.7</span> Practical Examples</a>
  <ul class="collapse">
  <li><a href="#reading-large-files" id="toc-reading-large-files" class="nav-link" data-scroll-target="#reading-large-files"><span class="header-section-number">16.7.1</span> Reading Large Files</a></li>
  <li><a href="#infinite-sequences" id="toc-infinite-sequences" class="nav-link" data-scroll-target="#infinite-sequences"><span class="header-section-number">16.7.2</span> Infinite Sequences</a></li>
  </ul></li>
  <li><a href="#comparison-with-iterators" id="toc-comparison-with-iterators" class="nav-link" data-scroll-target="#comparison-with-iterators"><span class="header-section-number">16.8</span> Comparison with Iterators</a>
  <ul class="collapse">
  <li><a href="#iterator-class-example" id="toc-iterator-class-example" class="nav-link" data-scroll-target="#iterator-class-example"><span class="header-section-number">16.8.1</span> Iterator Class Example</a></li>
  <li><a href="#equivalent-generator-example" id="toc-equivalent-generator-example" class="nav-link" data-scroll-target="#equivalent-generator-example"><span class="header-section-number">16.8.2</span> Equivalent Generator Example</a></li>
  </ul></li>
  <li><a href="#performance-considerations" id="toc-performance-considerations" class="nav-link" data-scroll-target="#performance-considerations"><span class="header-section-number">16.9</span> Performance Considerations</a>
  <ul class="collapse">
  <li><a href="#memory-efficiency" id="toc-memory-efficiency" class="nav-link" data-scroll-target="#memory-efficiency"><span class="header-section-number">16.9.1</span> Memory Efficiency</a></li>
  <li><a href="#lazy-evaluation" id="toc-lazy-evaluation" class="nav-link" data-scroll-target="#lazy-evaluation"><span class="header-section-number">16.9.2</span> Lazy Evaluation</a></li>
  </ul></li>
  <li><a href="#best-practices-2" id="toc-best-practices-2" class="nav-link" data-scroll-target="#best-practices-2"><span class="header-section-number">16.10</span> Best Practices</a></li>
  <li><a href="#conclusion-3" id="toc-conclusion-3" class="nav-link" data-scroll-target="#conclusion-3"><span class="header-section-number">16.11</span> Conclusion</a></li>
  </ul></li>
  <li><a href="#deep-dive-into-the-contextlib-python-module" id="toc-deep-dive-into-the-contextlib-python-module" class="nav-link" data-scroll-target="#deep-dive-into-the-contextlib-python-module"><span class="header-section-number">17</span> Deep Dive into the <code>contextlib</code> Python Module</a>
  <ul class="collapse">
  <li><a href="#table-of-contents-3" id="toc-table-of-contents-3" class="nav-link" data-scroll-target="#table-of-contents-3"><span class="header-section-number">17.1</span> Table of Contents</a></li>
  <li><a href="#introduction-to-context-managers" id="toc-introduction-to-context-managers" class="nav-link" data-scroll-target="#introduction-to-context-managers"><span class="header-section-number">17.2</span> Introduction to Context Managers</a>
  <ul class="collapse">
  <li><a href="#basic-example" id="toc-basic-example" class="nav-link" data-scroll-target="#basic-example"><span class="header-section-number">17.2.1</span> Basic Example</a></li>
  </ul></li>
  <li><a href="#the-contextlib-module" id="toc-the-contextlib-module" class="nav-link" data-scroll-target="#the-contextlib-module"><span class="header-section-number">17.3</span> The <code>contextlib</code> Module</a></li>
  <li><a href="#using-contextlib.contextmanager" id="toc-using-contextlib.contextmanager" class="nav-link" data-scroll-target="#using-contextlib.contextmanager"><span class="header-section-number">17.4</span> Using <code>contextlib.contextmanager</code></a>
  <ul class="collapse">
  <li><a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example"><span class="header-section-number">17.4.1</span> Example</a></li>
  </ul></li>
  <li><a href="#the-closing-function" id="toc-the-closing-function" class="nav-link" data-scroll-target="#the-closing-function"><span class="header-section-number">17.5</span> The <code>closing</code> Function</a>
  <ul class="collapse">
  <li><a href="#example-1" id="toc-example-1" class="nav-link" data-scroll-target="#example-1"><span class="header-section-number">17.5.1</span> Example</a></li>
  </ul></li>
  <li><a href="#the-suppress-function" id="toc-the-suppress-function" class="nav-link" data-scroll-target="#the-suppress-function"><span class="header-section-number">17.6</span> The <code>suppress</code> Function</a>
  <ul class="collapse">
  <li><a href="#example-2" id="toc-example-2" class="nav-link" data-scroll-target="#example-2"><span class="header-section-number">17.6.1</span> Example</a></li>
  </ul></li>
  <li><a href="#the-redirect_stdout-and-redirect_stderr-functions" id="toc-the-redirect_stdout-and-redirect_stderr-functions" class="nav-link" data-scroll-target="#the-redirect_stdout-and-redirect_stderr-functions"><span class="header-section-number">17.7</span> The <code>redirect_stdout</code> and <code>redirect_stderr</code> Functions</a>
  <ul class="collapse">
  <li><a href="#example-3" id="toc-example-3" class="nav-link" data-scroll-target="#example-3"><span class="header-section-number">17.7.1</span> Example</a></li>
  </ul></li>
  <li><a href="#the-exitstack-class" id="toc-the-exitstack-class" class="nav-link" data-scroll-target="#the-exitstack-class"><span class="header-section-number">17.8</span> The <code>ExitStack</code> Class</a>
  <ul class="collapse">
  <li><a href="#example-4" id="toc-example-4" class="nav-link" data-scroll-target="#example-4"><span class="header-section-number">17.8.1</span> Example</a></li>
  </ul></li>
  <li><a href="#combining-context-managers" id="toc-combining-context-managers" class="nav-link" data-scroll-target="#combining-context-managers"><span class="header-section-number">17.9</span> Combining Context Managers</a>
  <ul class="collapse">
  <li><a href="#example-5" id="toc-example-5" class="nav-link" data-scroll-target="#example-5"><span class="header-section-number">17.9.1</span> Example</a></li>
  </ul></li>
  <li><a href="#practical-examples-2" id="toc-practical-examples-2" class="nav-link" data-scroll-target="#practical-examples-2"><span class="header-section-number">17.10</span> Practical Examples</a>
  <ul class="collapse">
  <li><a href="#creating-a-temporary-directory" id="toc-creating-a-temporary-directory" class="nav-link" data-scroll-target="#creating-a-temporary-directory"><span class="header-section-number">17.10.1</span> Creating a Temporary Directory</a></li>
  <li><a href="#timing-code-execution" id="toc-timing-code-execution" class="nav-link" data-scroll-target="#timing-code-execution"><span class="header-section-number">17.10.2</span> Timing Code Execution</a></li>
  </ul></li>
  <li><a href="#best-practices-3" id="toc-best-practices-3" class="nav-link" data-scroll-target="#best-practices-3"><span class="header-section-number">17.11</span> Best Practices</a></li>
  <li><a href="#conclusion-4" id="toc-conclusion-4" class="nav-link" data-scroll-target="#conclusion-4"><span class="header-section-number">17.12</span> Conclusion</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Advanced Python Concepts</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Exploring advanced Python concepts can significantly enhance the functionality and efficiency of your code. This tutorial will cover asynchronous programming with <code>asyncio</code>, decorators, generators, and context managers using the <code>contextlib</code> library.</p>
<section id="asynchronous-programming-with-asyncio" class="level3" data-number="13.0.1">
<h3 data-number="13.0.1" class="anchored" data-anchor-id="asynchronous-programming-with-asyncio"><span class="header-section-number">13.0.1</span> Asynchronous Programming with <code>asyncio</code></h3>
<p>Asynchronous programming allows your code to perform tasks concurrently, improving efficiency, especially in I/O-bound operations.</p>
<section id="basics-of-asyncio" class="level4" data-number="13.0.1.1">
<h4 data-number="13.0.1.1" class="anchored" data-anchor-id="basics-of-asyncio"><span class="header-section-number">13.0.1.1</span> Basics of <code>asyncio</code></h4>
<p><code>asyncio</code> provides the necessary infrastructure for writing single-threaded concurrent code using <code>async</code> and <code>await</code> syntax.</p>
<section id="example-basic-asynchronous-function" class="level5" data-number="13.0.1.1.1">
<h5 data-number="13.0.1.1.1" class="anchored" data-anchor-id="example-basic-asynchronous-function"><span class="header-section-number">13.0.1.1.1</span> Example: Basic Asynchronous Function</h5>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> asyncio</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> say_hello():</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Hello"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> asyncio.sleep(<span class="dv">1</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"World"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Running the asynchronous function</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>asyncio.run(say_hello())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="running-multiple-tasks-concurrently" class="level4" data-number="13.0.1.2">
<h4 data-number="13.0.1.2" class="anchored" data-anchor-id="running-multiple-tasks-concurrently"><span class="header-section-number">13.0.1.2</span> Running Multiple Tasks Concurrently</h4>
<p>You can run multiple asynchronous tasks concurrently using <code>asyncio.gather</code>.</p>
<section id="example-concurrent-tasks" class="level5" data-number="13.0.1.2.1">
<h5 data-number="13.0.1.2.1" class="anchored" data-anchor-id="example-concurrent-tasks"><span class="header-section-number">13.0.1.2.1</span> Example: Concurrent Tasks</h5>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> asyncio</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> task1():</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Start Task 1"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> asyncio.sleep(<span class="dv">2</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"End Task 1"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> task2():</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Start Task 2"</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> asyncio.sleep(<span class="dv">1</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"End Task 2"</span>)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> main():</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> asyncio.gather(task1(), task2())</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>asyncio.run(main())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="decorators" class="level3" data-number="13.0.2">
<h3 data-number="13.0.2" class="anchored" data-anchor-id="decorators"><span class="header-section-number">13.0.2</span> Decorators</h3>
<p>Decorators are a powerful tool for modifying the behavior of functions or classes. They allow you to wrap another function to extend its behavior without explicitly modifying it.</p>
<section id="creating-a-simple-decorator" class="level4" data-number="13.0.2.1">
<h4 data-number="13.0.2.1" class="anchored" data-anchor-id="creating-a-simple-decorator"><span class="header-section-number">13.0.2.1</span> Creating a Simple Decorator</h4>
<section id="example-logging-decorator" class="level5" data-number="13.0.2.1.1">
<h5 data-number="13.0.2.1.1" class="anchored" data-anchor-id="example-logging-decorator"><span class="header-section-number">13.0.2.1.1</span> Example: Logging Decorator</h5>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> logger(func):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Executing </span><span class="sc">{</span>func<span class="sc">.</span><span class="va">__name__</span><span class="sc">}</span><span class="ss"> with arguments </span><span class="sc">{</span>args<span class="sc">}</span><span class="ss"> and </span><span class="sc">{</span>kwargs<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> func(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>func<span class="sc">.</span><span class="va">__name__</span><span class="sc">}</span><span class="ss"> returned </span><span class="sc">{</span>result<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> result</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wrapper</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="at">@logger</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(a, b):</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(add(<span class="dv">2</span>, <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="generators" class="level3" data-number="13.0.3">
<h3 data-number="13.0.3" class="anchored" data-anchor-id="generators"><span class="header-section-number">13.0.3</span> Generators</h3>
<p>Generators are a special type of iterator that allow you to iterate through a sequence of values lazily, meaning they generate values on the fly and only when needed.</p>
<section id="creating-generators-with-yield" class="level4" data-number="13.0.3.1">
<h4 data-number="13.0.3.1" class="anchored" data-anchor-id="creating-generators-with-yield"><span class="header-section-number">13.0.3.1</span> Creating Generators with <code>yield</code></h4>
<section id="example-simple-generator" class="level5" data-number="13.0.3.1.1">
<h5 data-number="13.0.3.1.1" class="anchored" data-anchor-id="example-simple-generator"><span class="header-section-number">13.0.3.1.1</span> Example: Simple Generator</h5>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> countdown(n):</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> n <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> n</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        n <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the generator</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> number <span class="kw">in</span> countdown(<span class="dv">5</span>):</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(number)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="generator-expressions" class="level4" data-number="13.0.3.2">
<h4 data-number="13.0.3.2" class="anchored" data-anchor-id="generator-expressions"><span class="header-section-number">13.0.3.2</span> Generator Expressions</h4>
<p>Generator expressions provide a concise way to create generators.</p>
<section id="example-generator-expression" class="level5" data-number="13.0.3.2.1">
<h5 data-number="13.0.3.2.1" class="anchored" data-anchor-id="example-generator-expression"><span class="header-section-number">13.0.3.2.1</span> Example: Generator Expression</h5>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generator expression to create a sequence of squares</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>squares <span class="op">=</span> (x <span class="op">*</span> x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>))</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the generator</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> square <span class="kw">in</span> squares:</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(square)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="context-managers" class="level3" data-number="13.0.4">
<h3 data-number="13.0.4" class="anchored" data-anchor-id="context-managers"><span class="header-section-number">13.0.4</span> Context Managers</h3>
<p>Context managers are used to properly manage resources, ensuring that they are properly cleaned up after use. The <code>with</code> statement is used to wrap the execution of a block of code within methods defined by a context manager.</p>
<section id="using-contextlib-to-create-context-managers" class="level4" data-number="13.0.4.1">
<h4 data-number="13.0.4.1" class="anchored" data-anchor-id="using-contextlib-to-create-context-managers"><span class="header-section-number">13.0.4.1</span> Using <code>contextlib</code> to Create Context Managers</h4>
<p>The <code>contextlib</code> module provides utilities for working with context managers.</p>
<section id="example-creating-a-simple-context-manager" class="level5" data-number="13.0.4.1.1">
<h5 data-number="13.0.4.1.1" class="anchored" data-anchor-id="example-creating-a-simple-context-manager"><span class="header-section-number">13.0.4.1.1</span> Example: Creating a Simple Context Manager</h5>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> contextlib <span class="im">import</span> contextmanager</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="at">@contextmanager</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> open_file(<span class="bu">file</span>, mode):</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    f <span class="op">=</span> <span class="bu">open</span>(<span class="bu">file</span>, mode)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> f</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">finally</span>:</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>        f.close()</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the context manager</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> open_file(<span class="st">'test.txt'</span>, <span class="st">'w'</span>) <span class="im">as</span> f:</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    f.write(<span class="st">'Hello, World!'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="putting-it-all-together" class="level3" data-number="13.0.5">
<h3 data-number="13.0.5" class="anchored" data-anchor-id="putting-it-all-together"><span class="header-section-number">13.0.5</span> Putting It All Together</h3>
<p>Let’s combine these advanced concepts into a single example to demonstrate their power and utility.</p>
<section id="example-asynchronous-file-downloader-with-logging-and-context-management" class="level5" data-number="13.0.5.0.1">
<h5 data-number="13.0.5.0.1" class="anchored" data-anchor-id="example-asynchronous-file-downloader-with-logging-and-context-management"><span class="header-section-number">13.0.5.0.1</span> Example: Asynchronous File Downloader with Logging and Context Management</h5>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> asyncio</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> contextlib <span class="im">import</span> contextmanager</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Context manager for logging</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="at">@contextmanager</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> logger(func_name):</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Starting </span><span class="sc">{</span>func_name<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">yield</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Finished </span><span class="sc">{</span>func_name<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Asynchronous function to simulate file download</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> download_file(<span class="bu">file</span>):</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">async</span> <span class="cf">with</span> logger(<span class="ss">f"download_file(</span><span class="sc">{</span><span class="bu">file</span><span class="sc">}</span><span class="ss">)"</span>):</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Downloading </span><span class="sc">{</span><span class="bu">file</span><span class="sc">}</span><span class="ss">..."</span>)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">await</span> asyncio.sleep(<span class="dv">2</span>)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Downloaded </span><span class="sc">{</span><span class="bu">file</span><span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Main asynchronous function to download multiple files</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> main(files):</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> asyncio.gather(<span class="op">*</span>(download_file(<span class="bu">file</span>) <span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> files))</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Running the main function</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>files <span class="op">=</span> [<span class="st">"file1.txt"</span>, <span class="st">"file2.txt"</span>, <span class="st">"file3.txt"</span>]</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>asyncio.run(main(files))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="conclusion" class="level3" data-number="13.0.6">
<h3 data-number="13.0.6" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">13.0.6</span> Conclusion</h3>
<p>Advanced Python concepts such as asynchronous programming, decorators, generators, and context managers can greatly enhance the functionality and efficiency of your code. By mastering these techniques, you can write more powerful, flexible, and maintainable Python programs. Use these tools to take your Python skills to the next level and tackle more complex problems with ease.</p>
</section>
<section id="deep-dive-into-the-asyncio-module-in-python" class="level1" data-number="14">
<h1 data-number="14"><span class="header-section-number">14</span> Deep Dive into the <code>asyncio</code> Module in Python</h1>
<p>The <code>asyncio</code> module in Python provides a framework for writing asynchronous, concurrent code using the <code>async</code> and <code>await</code> keywords. It is part of Python’s standard library and is used to manage asynchronous I/O operations, enabling the development of high-performance network and web servers, database connections, distributed task queues, and other concurrent applications.</p>
<section id="table-of-contents" class="level2" data-number="14.1">
<h2 data-number="14.1" class="anchored" data-anchor-id="table-of-contents"><span class="header-section-number">14.1</span> Table of Contents</h2>
<ol type="1">
<li><a href="#introduction-to-asynchronous-programming">Introduction to Asynchronous Programming</a></li>
<li><a href="#key-concepts">Key Concepts</a></li>
<li><a href="#basic-usage">Basic Usage</a></li>
<li><a href="#tasks-and-coroutines">Tasks and Coroutines</a></li>
<li><a href="#managing-tasks">Managing Tasks</a></li>
<li><a href="#synchronization-primitives">Synchronization Primitives</a></li>
<li><a href="#asynchronous-io">Asynchronous I/O</a></li>
<li><a href="#creating-a-simple-web-server">Creating a Simple Web Server</a></li>
<li><a href="#best-practices">Best Practices</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ol>
</section>
<section id="introduction-to-asynchronous-programming" class="level2" data-number="14.2">
<h2 data-number="14.2" class="anchored" data-anchor-id="introduction-to-asynchronous-programming"><span class="header-section-number">14.2</span> Introduction to Asynchronous Programming</h2>
<p>Asynchronous programming allows a program to perform tasks concurrently, without waiting for one task to complete before starting another. This is especially useful for I/O-bound and high-level structured network code.</p>
<p>In synchronous programming, tasks are executed sequentially. If one task takes a long time to complete (e.g., waiting for a network response), it can block the entire program. Asynchronous programming avoids this by allowing other tasks to run while waiting for long-running tasks to complete.</p>
</section>
<section id="key-concepts" class="level2" data-number="14.3">
<h2 data-number="14.3" class="anchored" data-anchor-id="key-concepts"><span class="header-section-number">14.3</span> Key Concepts</h2>
<p>Before diving into <code>asyncio</code>, it’s important to understand some key concepts:</p>
<ul>
<li><strong>Coroutines</strong>: Special functions defined with <code>async def</code> that can be paused and resumed.</li>
<li><strong>Event Loop</strong>: The core of an asynchronous application, responsible for executing asynchronous tasks, handling I/O operations, and coordinating the overall execution flow.</li>
<li><strong>Tasks</strong>: Wrappers around coroutines that can be scheduled and managed by the event loop.</li>
<li><strong>Futures</strong>: Represent results of asynchronous operations that may not be available yet.</li>
<li><strong>Await</strong>: A keyword used to pause the execution of a coroutine until the awaited coroutine completes.</li>
</ul>
</section>
<section id="basic-usage" class="level2" data-number="14.4">
<h2 data-number="14.4" class="anchored" data-anchor-id="basic-usage"><span class="header-section-number">14.4</span> Basic Usage</h2>
<section id="example-running-a-simple-coroutine" class="level3" data-number="14.4.1">
<h3 data-number="14.4.1" class="anchored" data-anchor-id="example-running-a-simple-coroutine"><span class="header-section-number">14.4.1</span> Example: Running a Simple Coroutine</h3>
<p>Let’s start with a simple example to understand how coroutines and the event loop work together:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> asyncio</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> say_hello():</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Hello"</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> asyncio.sleep(<span class="dv">1</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"World"</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the default event loop and run the coroutine</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>asyncio.run(say_hello())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example, <code>say_hello</code> is a coroutine that prints “Hello”, waits for 1 second, and then prints “World”. The <code>asyncio.run</code> function starts an event loop, runs the coroutine, and closes the loop when the coroutine is finished.</p>
</section>
</section>
<section id="tasks-and-coroutines" class="level2" data-number="14.5">
<h2 data-number="14.5" class="anchored" data-anchor-id="tasks-and-coroutines"><span class="header-section-number">14.5</span> Tasks and Coroutines</h2>
<section id="creating-and-running-multiple-coroutines" class="level3" data-number="14.5.1">
<h3 data-number="14.5.1" class="anchored" data-anchor-id="creating-and-running-multiple-coroutines"><span class="header-section-number">14.5.1</span> Creating and Running Multiple Coroutines</h3>
<p>You can create multiple coroutines and run them concurrently using <code>asyncio.gather</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> asyncio</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> task1():</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> asyncio.sleep(<span class="dv">1</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Task 1 completed"</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> task2():</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> asyncio.sleep(<span class="dv">2</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Task 2 completed"</span>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> main():</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> asyncio.gather(task1(), task2())</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>asyncio.run(main())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example, <code>task1</code> and <code>task2</code> are coroutines that run concurrently. <code>asyncio.gather</code> runs both coroutines and waits for both to complete.</p>
</section>
</section>
<section id="managing-tasks" class="level2" data-number="14.6">
<h2 data-number="14.6" class="anchored" data-anchor-id="managing-tasks"><span class="header-section-number">14.6</span> Managing Tasks</h2>
<section id="creating-and-cancelling-tasks" class="level3" data-number="14.6.1">
<h3 data-number="14.6.1" class="anchored" data-anchor-id="creating-and-cancelling-tasks"><span class="header-section-number">14.6.1</span> Creating and Cancelling Tasks</h3>
<p>You can create tasks explicitly using <code>asyncio.create_task</code>, and you can cancel tasks if needed:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> asyncio</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> task1():</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">await</span> asyncio.sleep(<span class="dv">3</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> asyncio.CancelledError:</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Task 1 was cancelled"</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> task2():</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> asyncio.sleep(<span class="dv">2</span>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Task 2 completed"</span>)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> main():</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    t1 <span class="op">=</span> asyncio.create_task(task1())</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    t2 <span class="op">=</span> asyncio.create_task(task2())</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> asyncio.sleep(<span class="dv">1</span>)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    t1.cancel()</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> asyncio.gather(t1, t2, return_exceptions<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>asyncio.run(main())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example, <code>task1</code> is cancelled after 1 second, while <code>task2</code> completes normally. The <code>CancelledError</code> is caught and handled in <code>task1</code>.</p>
</section>
</section>
<section id="synchronization-primitives" class="level2" data-number="14.7">
<h2 data-number="14.7" class="anchored" data-anchor-id="synchronization-primitives"><span class="header-section-number">14.7</span> Synchronization Primitives</h2>
<section id="using-locks" class="level3" data-number="14.7.1">
<h3 data-number="14.7.1" class="anchored" data-anchor-id="using-locks"><span class="header-section-number">14.7.1</span> Using Locks</h3>
<p><code>asyncio</code> provides several synchronization primitives, such as <code>Lock</code>, <code>Event</code>, <code>Condition</code>, and <code>Semaphore</code>.</p>
<section id="example-using-a-lock" class="level4" data-number="14.7.1.1">
<h4 data-number="14.7.1.1" class="anchored" data-anchor-id="example-using-a-lock"><span class="header-section-number">14.7.1.1</span> Example: Using a Lock</h4>
<div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> asyncio</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>lock <span class="op">=</span> asyncio.Lock()</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> task1():</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">async</span> <span class="cf">with</span> lock:</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Task 1 acquired lock"</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">await</span> asyncio.sleep(<span class="dv">2</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Task 1 released lock"</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> task2():</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">async</span> <span class="cf">with</span> lock:</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Task 2 acquired lock"</span>)</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">await</span> asyncio.sleep(<span class="dv">2</span>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Task 2 released lock"</span>)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> main():</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> asyncio.gather(task1(), task2())</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>asyncio.run(main())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example, <code>task1</code> and <code>task2</code> acquire and release the same lock. Only one task can hold the lock at a time, ensuring that the critical section is accessed by only one task at a time.</p>
</section>
</section>
</section>
<section id="asynchronous-io" class="level2" data-number="14.8">
<h2 data-number="14.8" class="anchored" data-anchor-id="asynchronous-io"><span class="header-section-number">14.8</span> Asynchronous I/O</h2>
<section id="example-asynchronous-file-io" class="level3" data-number="14.8.1">
<h3 data-number="14.8.1" class="anchored" data-anchor-id="example-asynchronous-file-io"><span class="header-section-number">14.8.1</span> Example: Asynchronous File I/O</h3>
<p>You can perform asynchronous file I/O using the <code>aiofiles</code> library:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> asyncio</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> aiofiles</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> write_file():</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">async</span> <span class="cf">with</span> aiofiles.<span class="bu">open</span>(<span class="st">'example.txt'</span>, mode<span class="op">=</span><span class="st">'w'</span>) <span class="im">as</span> f:</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">await</span> f.write(<span class="st">'Hello, asyncio!'</span>)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> read_file():</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">async</span> <span class="cf">with</span> aiofiles.<span class="bu">open</span>(<span class="st">'example.txt'</span>, mode<span class="op">=</span><span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>        contents <span class="op">=</span> <span class="cf">await</span> f.read()</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(contents)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> main():</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> write_file()</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> read_file()</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>asyncio.run(main())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example, <code>write_file</code> writes to a file asynchronously, and <code>read_file</code> reads from the file asynchronously using the <code>aiofiles</code> library.</p>
</section>
</section>
<section id="creating-a-simple-web-server" class="level2" data-number="14.9">
<h2 data-number="14.9" class="anchored" data-anchor-id="creating-a-simple-web-server"><span class="header-section-number">14.9</span> Creating a Simple Web Server</h2>
<section id="example-simple-http-server-with-aiohttp" class="level3" data-number="14.9.1">
<h3 data-number="14.9.1" class="anchored" data-anchor-id="example-simple-http-server-with-aiohttp"><span class="header-section-number">14.9.1</span> Example: Simple HTTP Server with <code>aiohttp</code></h3>
<p>You can create an asynchronous HTTP server using the <code>aiohttp</code> library:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> aiohttp <span class="im">import</span> web</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> asyncio</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> handle(request):</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> web.Response(text<span class="op">=</span><span class="st">"Hello, asyncio!"</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> web.Application()</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>app.add_routes([web.get(<span class="st">'/'</span>, handle)])</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    web.run_app(app)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example, we create a simple HTTP server that responds with “Hello, asyncio!” to any GET request on the root URL.</p>
</section>
</section>
<section id="best-practices" class="level2" data-number="14.10">
<h2 data-number="14.10" class="anchored" data-anchor-id="best-practices"><span class="header-section-number">14.10</span> Best Practices</h2>
<ol type="1">
<li><strong>Avoid Blocking Calls</strong>: Ensure that you do not use blocking calls in your asynchronous code, as this can block the event loop and degrade performance.</li>
<li><strong>Use <code>async</code> and <code>await</code> Appropriately</strong>: Make sure to use <code>async</code> and <code>await</code> for all asynchronous functions and calls.</li>
<li><strong>Handle Exceptions</strong>: Always handle exceptions in coroutines and tasks to prevent them from propagating and crashing the application.</li>
<li><strong>Limit Concurrency</strong>: Use semaphores or other synchronization primitives to limit concurrency and avoid overwhelming resources.</li>
<li><strong>Leverage Libraries</strong>: Use well-established libraries like <code>aiohttp</code> for HTTP operations and <code>aiomysql</code> or <code>aiopg</code> for database access to avoid reinventing the wheel.</li>
</ol>
</section>
<section id="conclusion-1" class="level2" data-number="14.11">
<h2 data-number="14.11" class="anchored" data-anchor-id="conclusion-1"><span class="header-section-number">14.11</span> Conclusion</h2>
<p>The <code>asyncio</code> module provides a powerful framework for writing concurrent and asynchronous code in Python. By leveraging its features, you can build efficient and scalable applications that handle I/O-bound tasks effectively. This tutorial covered the basics of <code>asyncio</code>, including coroutines, tasks, synchronization primitives, and asynchronous I/O. With this foundation, you can explore more advanced topics and libraries to enhance your asynchronous programming skills.</p>
</section>
</section>
<section id="deep-dive-into-python-decorators" class="level1" data-number="15">
<h1 data-number="15"><span class="header-section-number">15</span> Deep Dive into Python Decorators</h1>
<p>Decorators are a powerful and flexible feature in Python that allows the modification of functions or methods using other functions. They are commonly used for logging, access control, memoization, and many other cross-cutting concerns.</p>
<section id="table-of-contents-1" class="level2" data-number="15.1">
<h2 data-number="15.1" class="anchored" data-anchor-id="table-of-contents-1"><span class="header-section-number">15.1</span> Table of Contents</h2>
<ol type="1">
<li><a href="#introduction-to-decorators">Introduction to Decorators</a></li>
<li><a href="#function-decorators">Function Decorators</a></li>
<li><a href="#class-decorators">Class Decorators</a></li>
<li><a href="#using-multiple-decorators">Using Multiple Decorators</a></li>
<li><a href="#built-in-decorators">Built-in Decorators</a></li>
<li><a href="#practical-examples">Practical Examples</a></li>
<li><a href="#best-practices">Best Practices</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ol>
</section>
<section id="introduction-to-decorators" class="level2" data-number="15.2">
<h2 data-number="15.2" class="anchored" data-anchor-id="introduction-to-decorators"><span class="header-section-number">15.2</span> Introduction to Decorators</h2>
<p>A decorator is a function that takes another function and extends its behavior without explicitly modifying it. Decorators provide a way to dynamically alter the functionality of your code.</p>
<section id="basic-decorator-example" class="level3" data-number="15.2.1">
<h3 data-number="15.2.1" class="anchored" data-anchor-id="basic-decorator-example"><span class="header-section-number">15.2.1</span> Basic Decorator Example</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_decorator(func):</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> wrapper():</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Something is happening before the function is called."</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>        func()</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Something is happening after the function is called."</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wrapper</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="at">@my_decorator</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> say_hello():</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Hello!"</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>say_hello()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example, <code>my_decorator</code> is a decorator function that wraps the <code>say_hello</code> function, adding some behavior before and after it is called.</p>
</section>
</section>
<section id="function-decorators" class="level2" data-number="15.3">
<h2 data-number="15.3" class="anchored" data-anchor-id="function-decorators"><span class="header-section-number">15.3</span> Function Decorators</h2>
<section id="creating-and-using-function-decorators" class="level3" data-number="15.3.1">
<h3 data-number="15.3.1" class="anchored" data-anchor-id="creating-and-using-function-decorators"><span class="header-section-number">15.3.1</span> Creating and Using Function Decorators</h3>
<p>A function decorator is a function that takes another function as an argument and returns a new function that adds some behavior.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> decorator(func):</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Before the function call"</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> func(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"After the function call"</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> result</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wrapper</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="at">@decorator</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greet(name):</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Hello, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>greet(<span class="st">"Alice"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="decorating-functions-with-arguments" class="level3" data-number="15.3.2">
<h3 data-number="15.3.2" class="anchored" data-anchor-id="decorating-functions-with-arguments"><span class="header-section-number">15.3.2</span> Decorating Functions with Arguments</h3>
<p>You can also create decorators that work with functions that have arguments.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> decorator(func):</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Arguments: </span><span class="sc">{</span>args<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>kwargs<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> func(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> result</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wrapper</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="at">@decorator</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(a, b):</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(add(<span class="dv">2</span>, <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="passing-arguments-to-decorators" class="level3" data-number="15.3.3">
<h3 data-number="15.3.3" class="anchored" data-anchor-id="passing-arguments-to-decorators"><span class="header-section-number">15.3.3</span> Passing Arguments to Decorators</h3>
<p>You can pass arguments to decorators by adding an extra layer of wrapping.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> repeat(num_times):</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> decorator(func):</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(num_times):</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>                result <span class="op">=</span> func(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> result</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> wrapper</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> decorator</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="at">@repeat</span>(<span class="dv">3</span>)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> say_hello(name):</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Hello, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>say_hello(<span class="st">"Bob"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="class-decorators" class="level2" data-number="15.4">
<h2 data-number="15.4" class="anchored" data-anchor-id="class-decorators"><span class="header-section-number">15.4</span> Class Decorators</h2>
<p>Class decorators are similar to function decorators but are used to modify classes.</p>
<section id="basic-class-decorator" class="level3" data-number="15.4.1">
<h3 data-number="15.4.1" class="anchored" data-anchor-id="basic-class-decorator"><span class="header-section-number">15.4.1</span> Basic Class Decorator</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> class_decorator(cls):</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span> Wrapped(cls):</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">def</span> new_method(<span class="va">self</span>):</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"New method added by decorator"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>        cls.new_method <span class="op">=</span> new_method</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Wrapped</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="at">@class_decorator</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyClass:</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> method(<span class="va">self</span>):</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Original method"</span>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> MyClass()</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>obj.method()</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>obj.new_method()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="using-class-decorators-to-modify-methods" class="level3" data-number="15.4.2">
<h3 data-number="15.4.2" class="anchored" data-anchor-id="using-class-decorators-to-modify-methods"><span class="header-section-number">15.4.2</span> Using Class Decorators to Modify Methods</h3>
<p>You can also use class decorators to modify class methods.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> method_decorator(method):</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> wrapper(<span class="va">self</span>, <span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Before method call"</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> method(<span class="va">self</span>, <span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"After method call"</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> result</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wrapper</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> class_decorator(cls):</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    cls.method <span class="op">=</span> method_decorator(cls.method)</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cls</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="at">@class_decorator</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyClass:</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> method(<span class="va">self</span>):</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Original method"</span>)</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> MyClass()</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>obj.method()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="using-multiple-decorators" class="level2" data-number="15.5">
<h2 data-number="15.5" class="anchored" data-anchor-id="using-multiple-decorators"><span class="header-section-number">15.5</span> Using Multiple Decorators</h2>
<p>You can stack multiple decorators on a single function or method.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> decorator1(func):</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Decorator 1"</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> func(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wrapper</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> decorator2(func):</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Decorator 2"</span>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> func(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wrapper</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="at">@decorator1</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="at">@decorator2</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greet(name):</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Hello, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>greet(<span class="st">"Alice"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example, <code>decorator2</code> is applied first, followed by <code>decorator1</code>.</p>
</section>
<section id="built-in-decorators" class="level2" data-number="15.6">
<h2 data-number="15.6" class="anchored" data-anchor-id="built-in-decorators"><span class="header-section-number">15.6</span> Built-in Decorators</h2>
<p>Python provides several built-in decorators, such as <code>@staticmethod</code>, <code>@classmethod</code>, and <code>@property</code>.</p>
<section id="static-method" class="level3" data-number="15.6.1">
<h3 data-number="15.6.1" class="anchored" data-anchor-id="static-method"><span class="header-section-number">15.6.1</span> Static Method</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyClass:</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">@staticmethod</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> static_method():</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"This is a static method"</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>MyClass.static_method()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="class-method" class="level3" data-number="15.6.2">
<h3 data-number="15.6.2" class="anchored" data-anchor-id="class-method"><span class="header-section-number">15.6.2</span> Class Method</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyClass:</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">@classmethod</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> class_method(cls):</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"This is a class method of </span><span class="sc">{</span>cls<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>MyClass.class_method()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="property" class="level3" data-number="15.6.3">
<h3 data-number="15.6.3" class="anchored" data-anchor-id="property"><span class="header-section-number">15.6.3</span> Property</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyClass:</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, value):</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>._value <span class="op">=</span> value</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> value(<span class="va">self</span>):</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>._value</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">@value.setter</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> value(<span class="va">self</span>, new_value):</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> new_value <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Value cannot be negative"</span>)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>._value <span class="op">=</span> new_value</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> MyClass(<span class="dv">10</span>)</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(obj.value)</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>obj.value <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(obj.value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="practical-examples" class="level2" data-number="15.7">
<h2 data-number="15.7" class="anchored" data-anchor-id="practical-examples"><span class="header-section-number">15.7</span> Practical Examples</h2>
<section id="logging-decorator" class="level3" data-number="15.7.1">
<h3 data-number="15.7.1" class="anchored" data-anchor-id="logging-decorator"><span class="header-section-number">15.7.1</span> Logging Decorator</h3>
<p>A logging decorator can be used to log function calls.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> logging</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> log(func):</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>        logging.info(<span class="ss">f"Running </span><span class="sc">{</span>func<span class="sc">.</span><span class="va">__name__</span><span class="sc">}</span><span class="ss"> with </span><span class="sc">{</span>args<span class="sc">}</span><span class="ss"> and </span><span class="sc">{</span>kwargs<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> func(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wrapper</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="at">@log</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> multiply(x, y):</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> y</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>logging.basicConfig(level<span class="op">=</span>logging.INFO)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(multiply(<span class="dv">2</span>, <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="timing-decorator" class="level3" data-number="15.7.2">
<h3 data-number="15.7.2" class="anchored" data-anchor-id="timing-decorator"><span class="header-section-number">15.7.2</span> Timing Decorator</h3>
<p>A timing decorator can be used to measure the execution time of a function.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> timing(func):</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>        start <span class="op">=</span> time.time()</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> func(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>        end <span class="op">=</span> time.time()</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>func<span class="sc">.</span><span class="va">__name__</span><span class="sc">}</span><span class="ss"> took </span><span class="sc">{</span>end <span class="op">-</span> start<span class="sc">:.4f}</span><span class="ss"> seconds"</span>)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> result</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wrapper</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="at">@timing</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_sum(n):</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span>(<span class="bu">range</span>(n))</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(calculate_sum(<span class="dv">1000000</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="best-practices-1" class="level2" data-number="15.8">
<h2 data-number="15.8" class="anchored" data-anchor-id="best-practices-1"><span class="header-section-number">15.8</span> Best Practices</h2>
<ol type="1">
<li><strong>Use <code>functools.wraps</code></strong>: Use <code>functools.wraps</code> to preserve the original function’s metadata when writing decorators.</li>
</ol>
<div class="sourceCode" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> functools <span class="im">import</span> wraps</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> decorator(func):</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">@wraps</span>(func)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> func(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wrapper</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li><strong>Keep It Simple</strong>: Keep the decorator logic simple and focused on a single responsibility.</li>
<li><strong>Test Thoroughly</strong>: Test decorators thoroughly to ensure they don’t introduce bugs or side effects.</li>
<li><strong>Use Decorators Judiciously</strong>: Avoid overusing decorators; they can make the code harder to understand if used excessively.</li>
</ol>
</section>
<section id="conclusion-2" class="level2" data-number="15.9">
<h2 data-number="15.9" class="anchored" data-anchor-id="conclusion-2"><span class="header-section-number">15.9</span> Conclusion</h2>
<p>Decorators are a powerful feature in Python that allows you to extend and modify the behavior of functions and methods. By understanding how to create and use function and class decorators, you can write more modular, reusable, and maintainable code. This tutorial covered the basics of decorators, including practical examples and best practices. With this foundation, you can start exploring more advanced uses of decorators in your Python projects.</p>
</section>
</section>
<section id="deep-dive-into-python-generators" class="level1" data-number="16">
<h1 data-number="16"><span class="header-section-number">16</span> Deep Dive into Python Generators</h1>
<p>Generators are a powerful tool in Python that allows you to iterate over a sequence of values lazily, meaning you generate the values on the fly rather than storing them in memory all at once. This can lead to significant performance improvements, especially when working with large datasets or streams of data.</p>
<section id="table-of-contents-2" class="level2" data-number="16.1">
<h2 data-number="16.1" class="anchored" data-anchor-id="table-of-contents-2"><span class="header-section-number">16.1</span> Table of Contents</h2>
<ol type="1">
<li><a href="#introduction-to-generators">Introduction to Generators</a></li>
<li><a href="#creating-generators">Creating Generators</a></li>
<li><a href="#using-generators">Using Generators</a></li>
<li><a href="#generator-expressions">Generator Expressions</a></li>
<li><a href="#the-yield-statement">The <code>yield</code> Statement</a></li>
<li><a href="#advanced-generator-usage">Advanced Generator Usage</a>
<ul>
<li><a href="#sending-values-to-generators">Sending Values to Generators</a></li>
<li><a href="#throwing-exceptions-into-generators">Throwing Exceptions into Generators</a></li>
<li><a href="#closing-generators">Closing Generators</a></li>
</ul></li>
<li><a href="#practical-examples">Practical Examples</a></li>
<li><a href="#comparison-with-iterators">Comparison with Iterators</a></li>
<li><a href="#performance-considerations">Performance Considerations</a></li>
<li><a href="#best-practices">Best Practices</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ol>
</section>
<section id="introduction-to-generators" class="level2" data-number="16.2">
<h2 data-number="16.2" class="anchored" data-anchor-id="introduction-to-generators"><span class="header-section-number">16.2</span> Introduction to Generators</h2>
<p>Generators provide a way to create iterators in Python. They are written like regular functions but use the <code>yield</code> statement whenever they want to return data. Each call to the generator’s <code>__next__()</code> method (which is implicitly called by the <code>next()</code> function) resumes the function from where it left off (it remembers all the data values and which statement was last executed).</p>
</section>
<section id="creating-generators" class="level2" data-number="16.3">
<h2 data-number="16.3" class="anchored" data-anchor-id="creating-generators"><span class="header-section-number">16.3</span> Creating Generators</h2>
<section id="generator-functions" class="level3" data-number="16.3.1">
<h3 data-number="16.3.1" class="anchored" data-anchor-id="generator-functions"><span class="header-section-number">16.3.1</span> Generator Functions</h3>
<p>A generator function is defined like a normal function but uses the <code>yield</code> statement instead of <code>return</code> to return a value. Here’s a simple example:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> simple_generator():</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">yield</span> <span class="dv">1</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">yield</span> <span class="dv">2</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">yield</span> <span class="dv">3</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>gen <span class="op">=</span> simple_generator()</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">next</span>(gen))  <span class="co"># Output: 1</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">next</span>(gen))  <span class="co"># Output: 2</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">next</span>(gen))  <span class="co"># Output: 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="generator-expressions-1" class="level3" data-number="16.3.2">
<h3 data-number="16.3.2" class="anchored" data-anchor-id="generator-expressions-1"><span class="header-section-number">16.3.2</span> Generator Expressions</h3>
<p>Generator expressions provide an easy and concise way to create generators. They are similar to list comprehensions but use parentheses instead of square brackets.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>gen_exp <span class="op">=</span> (x <span class="op">*</span> x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>))</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">next</span>(gen_exp))  <span class="co"># Output: 0</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">next</span>(gen_exp))  <span class="co"># Output: 1</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">next</span>(gen_exp))  <span class="co"># Output: 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="using-generators" class="level2" data-number="16.4">
<h2 data-number="16.4" class="anchored" data-anchor-id="using-generators"><span class="header-section-number">16.4</span> Using Generators</h2>
<p>Generators can be iterated over using a <code>for</code> loop, which automatically handles the <code>StopIteration</code> exception.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> countdown(n):</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> n <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> n</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>        n <span class="op">-=</span> <span class="dv">1</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> num <span class="kw">in</span> countdown(<span class="dv">5</span>):</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(num)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="the-yield-statement" class="level2" data-number="16.5">
<h2 data-number="16.5" class="anchored" data-anchor-id="the-yield-statement"><span class="header-section-number">16.5</span> The <code>yield</code> Statement</h2>
<p>The <code>yield</code> statement is used to produce a value from the generator and pause its execution. The next time <code>__next__()</code> is called, the generator resumes execution immediately after the <code>yield</code>.</p>
<section id="example-fibonacci-sequence" class="level3" data-number="16.5.1">
<h3 data-number="16.5.1" class="anchored" data-anchor-id="example-fibonacci-sequence"><span class="header-section-number">16.5.1</span> Example: Fibonacci Sequence</h3>
<div class="sourceCode" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fibonacci(limit):</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    a, b <span class="op">=</span> <span class="dv">0</span>, <span class="dv">1</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> a <span class="op">&lt;</span> limit:</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> a</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>        a, b <span class="op">=</span> b, a <span class="op">+</span> b</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>fib <span class="op">=</span> fibonacci(<span class="dv">10</span>)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> num <span class="kw">in</span> fib:</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(num)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="advanced-generator-usage" class="level2" data-number="16.6">
<h2 data-number="16.6" class="anchored" data-anchor-id="advanced-generator-usage"><span class="header-section-number">16.6</span> Advanced Generator Usage</h2>
<section id="sending-values-to-generators" class="level3" data-number="16.6.1">
<h3 data-number="16.6.1" class="anchored" data-anchor-id="sending-values-to-generators"><span class="header-section-number">16.6.1</span> Sending Values to Generators</h3>
<p>You can send values to a generator using the <code>send()</code> method. This can be useful for coroutines or advanced control flow.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> echo():</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>        received <span class="op">=</span> <span class="cf">yield</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'Received: </span><span class="sc">{</span>received<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>gen <span class="op">=</span> echo()</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="bu">next</span>(gen)  <span class="co"># Prime the generator</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>gen.send(<span class="st">'Hello'</span>)  <span class="co"># Output: Received: Hello</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>gen.send(<span class="st">'World'</span>)  <span class="co"># Output: Received: World</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="throwing-exceptions-into-generators" class="level3" data-number="16.6.2">
<h3 data-number="16.6.2" class="anchored" data-anchor-id="throwing-exceptions-into-generators"><span class="header-section-number">16.6.2</span> Throwing Exceptions into Generators</h3>
<p>You can throw exceptions into a generator using the <code>throw()</code> method. This allows you to handle errors within the generator.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generator():</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> <span class="st">'Normal execution'</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> <span class="st">'Handling ValueError'</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">yield</span> <span class="st">'End'</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>gen <span class="op">=</span> generator()</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">next</span>(gen))  <span class="co"># Output: Normal execution</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(gen.throw(<span class="pp">ValueError</span>))  <span class="co"># Output: Handling ValueError</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">next</span>(gen))  <span class="co"># Output: End</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="closing-generators" class="level3" data-number="16.6.3">
<h3 data-number="16.6.3" class="anchored" data-anchor-id="closing-generators"><span class="header-section-number">16.6.3</span> Closing Generators</h3>
<p>You can close a generator using the <code>close()</code> method. This raises a <code>GeneratorExit</code> exception inside the generator to perform any cleanup.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generator():</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> <span class="st">'Running'</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">finally</span>:</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Closing generator'</span>)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>gen <span class="op">=</span> generator()</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">next</span>(gen))  <span class="co"># Output: Running</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>gen.close()  <span class="co"># Output: Closing generator</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="practical-examples-1" class="level2" data-number="16.7">
<h2 data-number="16.7" class="anchored" data-anchor-id="practical-examples-1"><span class="header-section-number">16.7</span> Practical Examples</h2>
<section id="reading-large-files" class="level3" data-number="16.7.1">
<h3 data-number="16.7.1" class="anchored" data-anchor-id="reading-large-files"><span class="header-section-number">16.7.1</span> Reading Large Files</h3>
<p>Generators can be very useful when reading large files line by line, as they allow you to process each line without loading the entire file into memory.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_large_file(file_path):</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(file_path) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> line <span class="kw">in</span> <span class="bu">file</span>:</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">yield</span> line</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> read_large_file(<span class="st">'large_file.txt'</span>):</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    process(line)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="infinite-sequences" class="level3" data-number="16.7.2">
<h3 data-number="16.7.2" class="anchored" data-anchor-id="infinite-sequences"><span class="header-section-number">16.7.2</span> Infinite Sequences</h3>
<p>Generators can be used to create infinite sequences.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> infinite_sequence():</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    num <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> num</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>        num <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> infinite_sequence():</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(i)</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">&gt;=</span> <span class="dv">10</span>:</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="comparison-with-iterators" class="level2" data-number="16.8">
<h2 data-number="16.8" class="anchored" data-anchor-id="comparison-with-iterators"><span class="header-section-number">16.8</span> Comparison with Iterators</h2>
<p>Generators are a simple way to create iterators. Unlike a regular iterator, which requires you to define <code>__iter__()</code> and <code>__next__()</code>, a generator function does this automatically.</p>
<section id="iterator-class-example" class="level3" data-number="16.8.1">
<h3 data-number="16.8.1" class="anchored" data-anchor-id="iterator-class-example"><span class="header-section-number">16.8.1</span> Iterator Class Example</h3>
<div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Counter:</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, low, high):</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.current <span class="op">=</span> low</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.high <span class="op">=</span> high</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__iter__</span>(<span class="va">self</span>):</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__next__</span>(<span class="va">self</span>):</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="va">self</span>.current <span class="op">&gt;</span> <span class="va">self</span>.high:</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">StopIteration</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.current <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">self</span>.current <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>counter <span class="op">=</span> Counter(<span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> num <span class="kw">in</span> counter:</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(num)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="equivalent-generator-example" class="level3" data-number="16.8.2">
<h3 data-number="16.8.2" class="anchored" data-anchor-id="equivalent-generator-example"><span class="header-section-number">16.8.2</span> Equivalent Generator Example</h3>
<div class="sourceCode" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> counter(low, high):</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    current <span class="op">=</span> low</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> current <span class="op">&lt;=</span> high:</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> current</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>        current <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> num <span class="kw">in</span> counter(<span class="dv">1</span>, <span class="dv">5</span>):</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(num)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="performance-considerations" class="level2" data-number="16.9">
<h2 data-number="16.9" class="anchored" data-anchor-id="performance-considerations"><span class="header-section-number">16.9</span> Performance Considerations</h2>
<p>Generators can lead to significant performance improvements by reducing memory usage and allowing for lazy evaluation.</p>
<section id="memory-efficiency" class="level3" data-number="16.9.1">
<h3 data-number="16.9.1" class="anchored" data-anchor-id="memory-efficiency"><span class="header-section-number">16.9.1</span> Memory Efficiency</h3>
<p>Generators do not store the entire sequence in memory. Instead, they generate each value on the fly, which is much more memory efficient.</p>
</section>
<section id="lazy-evaluation" class="level3" data-number="16.9.2">
<h3 data-number="16.9.2" class="anchored" data-anchor-id="lazy-evaluation"><span class="header-section-number">16.9.2</span> Lazy Evaluation</h3>
<p>Generators are evaluated lazily, meaning they only produce values when needed. This can improve performance, especially for large datasets or infinite sequences.</p>
</section>
</section>
<section id="best-practices-2" class="level2" data-number="16.10">
<h2 data-number="16.10" class="anchored" data-anchor-id="best-practices-2"><span class="header-section-number">16.10</span> Best Practices</h2>
<ol type="1">
<li><strong>Use Generators for Large Datasets</strong>: When working with large datasets, use generators to improve memory efficiency.</li>
<li><strong>Keep Generators Simple</strong>: Keep your generator functions simple and focused on a single task.</li>
<li><strong>Use Generator Expressions</strong>: Use generator expressions for simple cases where you would otherwise use a list comprehension.</li>
<li><strong>Handle Generator Cleanup</strong>: Ensure proper cleanup of resources within generators using try/finally blocks or context managers.</li>
</ol>
</section>
<section id="conclusion-3" class="level2" data-number="16.11">
<h2 data-number="16.11" class="anchored" data-anchor-id="conclusion-3"><span class="header-section-number">16.11</span> Conclusion</h2>
<p>Generators are a powerful feature in Python that allow you to work with sequences of data in a memory-efficient and performant way. By using <code>yield</code>, you can create iterators with less code and more readability. Advanced techniques like sending values, throwing exceptions, and closing generators further extend their capabilities. By following best practices and understanding the intricacies of generators, you can write more efficient and elegant Python code.</p>
</section>
</section>
<section id="deep-dive-into-the-contextlib-python-module" class="level1" data-number="17">
<h1 data-number="17"><span class="header-section-number">17</span> Deep Dive into the <code>contextlib</code> Python Module</h1>
<p>The <code>contextlib</code> module in Python provides utilities for working with context managers and the <code>with</code> statement. Context managers are used to properly manage resources such as file streams, network connections, and locks by ensuring that resources are properly cleaned up after use. The <code>contextlib</code> module helps simplify the creation and management of these context managers.</p>
<section id="table-of-contents-3" class="level2" data-number="17.1">
<h2 data-number="17.1" class="anchored" data-anchor-id="table-of-contents-3"><span class="header-section-number">17.1</span> Table of Contents</h2>
<ol type="1">
<li><a href="#introduction-to-context-managers">Introduction to Context Managers</a></li>
<li><a href="#the-contextlib-module">The <code>contextlib</code> Module</a></li>
<li><a href="#using-contextlibcontextmanager">Using <code>contextlib.contextmanager</code></a></li>
<li><a href="#the-closing-function">The <code>closing</code> Function</a></li>
<li><a href="#the-suppress-function">The <code>suppress</code> Function</a></li>
<li><a href="#the-redirect_stdout-and-redirect_stderr-functions">The <code>redirect_stdout</code> and <code>redirect_stderr</code> Functions</a></li>
<li><a href="#the-exitstack-class">The <code>ExitStack</code> Class</a></li>
<li><a href="#combining-context-managers">Combining Context Managers</a></li>
<li><a href="#practical-examples">Practical Examples</a></li>
<li><a href="#best-practices">Best Practices</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ol>
</section>
<section id="introduction-to-context-managers" class="level2" data-number="17.2">
<h2 data-number="17.2" class="anchored" data-anchor-id="introduction-to-context-managers"><span class="header-section-number">17.2</span> Introduction to Context Managers</h2>
<p>A context manager is an object that defines the runtime context to be established when executing a <code>with</code> statement. Common use cases include opening and closing files, acquiring and releasing locks, and establishing and tearing down network connections.</p>
<section id="basic-example" class="level3" data-number="17.2.1">
<h3 data-number="17.2.1" class="anchored" data-anchor-id="basic-example"><span class="header-section-number">17.2.1</span> Basic Example</h3>
<div class="sourceCode" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'example.txt'</span>, <span class="st">'w'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">file</span>.write(<span class="st">'Hello, world!'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example, the file is automatically closed when the block inside the <code>with</code> statement is exited, even if an exception occurs.</p>
</section>
</section>
<section id="the-contextlib-module" class="level2" data-number="17.3">
<h2 data-number="17.3" class="anchored" data-anchor-id="the-contextlib-module"><span class="header-section-number">17.3</span> The <code>contextlib</code> Module</h2>
<p>The <code>contextlib</code> module provides several utilities to help create and manage context managers. It simplifies the process of writing and using context managers.</p>
</section>
<section id="using-contextlib.contextmanager" class="level2" data-number="17.4">
<h2 data-number="17.4" class="anchored" data-anchor-id="using-contextlib.contextmanager"><span class="header-section-number">17.4</span> Using <code>contextlib.contextmanager</code></h2>
<p>The <code>contextmanager</code> decorator from the <code>contextlib</code> module allows you to create a context manager using a generator function. This approach is often more readable and concise than creating a class-based context manager.</p>
<section id="example" class="level3" data-number="17.4.1">
<h3 data-number="17.4.1" class="anchored" data-anchor-id="example"><span class="header-section-number">17.4.1</span> Example</h3>
<div class="sourceCode" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> contextlib <span class="im">import</span> contextmanager</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="at">@contextmanager</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> open_file(<span class="bu">file</span>, mode):</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    f <span class="op">=</span> <span class="bu">open</span>(<span class="bu">file</span>, mode)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> f</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">finally</span>:</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>        f.close()</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> open_file(<span class="st">'example.txt'</span>, <span class="st">'w'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">file</span>.write(<span class="st">'Hello, world!'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example, the <code>open_file</code> function is a context manager that ensures the file is properly closed after use.</p>
</section>
</section>
<section id="the-closing-function" class="level2" data-number="17.5">
<h2 data-number="17.5" class="anchored" data-anchor-id="the-closing-function"><span class="header-section-number">17.5</span> The <code>closing</code> Function</h2>
<p>The <code>closing</code> function is a utility that ensures an object with a <code>close</code> method is closed when the block inside the <code>with</code> statement is exited.</p>
<section id="example-1" class="level3" data-number="17.5.1">
<h3 data-number="17.5.1" class="anchored" data-anchor-id="example-1"><span class="header-section-number">17.5.1</span> Example</h3>
<div class="sourceCode" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> contextlib <span class="im">import</span> closing</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> urllib.request</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> closing(urllib.request.urlopen(<span class="st">'http://www.example.com'</span>)) <span class="im">as</span> page:</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> page:</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(line)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here, the <code>closing</code> function ensures that the URL connection is properly closed after use.</p>
</section>
</section>
<section id="the-suppress-function" class="level2" data-number="17.6">
<h2 data-number="17.6" class="anchored" data-anchor-id="the-suppress-function"><span class="header-section-number">17.6</span> The <code>suppress</code> Function</h2>
<p>The <code>suppress</code> function allows you to suppress specified exceptions within a <code>with</code> statement. This is useful for ignoring specific errors without interrupting the flow of your program.</p>
<section id="example-2" class="level3" data-number="17.6.1">
<h3 data-number="17.6.1" class="anchored" data-anchor-id="example-2"><span class="header-section-number">17.6.1</span> Example</h3>
<div class="sourceCode" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> contextlib <span class="im">import</span> suppress</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> suppress(<span class="pp">FileNotFoundError</span>):</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">open</span>(<span class="st">'non_existent_file.txt'</span>)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'File not found, but no exception was raised.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example, the <code>FileNotFoundError</code> is suppressed, so the program continues running without interruption.</p>
</section>
</section>
<section id="the-redirect_stdout-and-redirect_stderr-functions" class="level2" data-number="17.7">
<h2 data-number="17.7" class="anchored" data-anchor-id="the-redirect_stdout-and-redirect_stderr-functions"><span class="header-section-number">17.7</span> The <code>redirect_stdout</code> and <code>redirect_stderr</code> Functions</h2>
<p>The <code>redirect_stdout</code> and <code>redirect_stderr</code> functions allow you to redirect the output of <code>stdout</code> and <code>stderr</code> to another stream, such as a file.</p>
<section id="example-3" class="level3" data-number="17.7.1">
<h3 data-number="17.7.1" class="anchored" data-anchor-id="example-3"><span class="header-section-number">17.7.1</span> Example</h3>
<div class="sourceCode" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> contextlib <span class="im">import</span> redirect_stdout</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'output.txt'</span>, <span class="st">'w'</span>) <span class="im">as</span> f:</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> redirect_stdout(f):</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'This will be written to the file.'</span>)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'This will be written to the console.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here, the <code>print</code> statement inside the <code>with</code> block is redirected to the <code>output.txt</code> file.</p>
</section>
</section>
<section id="the-exitstack-class" class="level2" data-number="17.8">
<h2 data-number="17.8" class="anchored" data-anchor-id="the-exitstack-class"><span class="header-section-number">17.8</span> The <code>ExitStack</code> Class</h2>
<p>The <code>ExitStack</code> class allows you to dynamically manage a stack of context managers. This is useful when you need to enter and exit multiple context managers in a flexible way.</p>
<section id="example-4" class="level3" data-number="17.8.1">
<h3 data-number="17.8.1" class="anchored" data-anchor-id="example-4"><span class="header-section-number">17.8.1</span> Example</h3>
<div class="sourceCode" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> contextlib <span class="im">import</span> ExitStack</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> ExitStack() <span class="im">as</span> stack:</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    files <span class="op">=</span> [stack.enter_context(<span class="bu">open</span>(<span class="ss">f'file</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">.txt'</span>, <span class="st">'w'</span>)) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>)]</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, <span class="bu">file</span> <span class="kw">in</span> <span class="bu">enumerate</span>(files):</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">file</span>.write(<span class="ss">f'This is file </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">.'</span>)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'All files are closed.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example, the <code>ExitStack</code> manages multiple file context managers, ensuring they are all properly closed.</p>
</section>
</section>
<section id="combining-context-managers" class="level2" data-number="17.9">
<h2 data-number="17.9" class="anchored" data-anchor-id="combining-context-managers"><span class="header-section-number">17.9</span> Combining Context Managers</h2>
<p>You can use the <code>ExitStack</code> class to combine multiple context managers into a single <code>with</code> statement.</p>
<section id="example-5" class="level3" data-number="17.9.1">
<h3 data-number="17.9.1" class="anchored" data-anchor-id="example-5"><span class="header-section-number">17.9.1</span> Example</h3>
<div class="sourceCode" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> contextlib <span class="im">import</span> ExitStack</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> ExitStack() <span class="im">as</span> stack:</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    file1 <span class="op">=</span> stack.enter_context(<span class="bu">open</span>(<span class="st">'file1.txt'</span>, <span class="st">'w'</span>))</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    file2 <span class="op">=</span> stack.enter_context(<span class="bu">open</span>(<span class="st">'file2.txt'</span>, <span class="st">'w'</span>))</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Perform operations on file1 and file2</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Both files are closed.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here, both <code>file1</code> and <code>file2</code> are managed by the <code>ExitStack</code>, ensuring they are both properly closed.</p>
</section>
</section>
<section id="practical-examples-2" class="level2" data-number="17.10">
<h2 data-number="17.10" class="anchored" data-anchor-id="practical-examples-2"><span class="header-section-number">17.10</span> Practical Examples</h2>
<section id="creating-a-temporary-directory" class="level3" data-number="17.10.1">
<h3 data-number="17.10.1" class="anchored" data-anchor-id="creating-a-temporary-directory"><span class="header-section-number">17.10.1</span> Creating a Temporary Directory</h3>
<div class="sourceCode" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> tempfile</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> contextlib <span class="im">import</span> contextmanager</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="at">@contextmanager</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> temporary_directory():</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    dirpath <span class="op">=</span> tempfile.mkdtemp()</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> dirpath</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">finally</span>:</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>        os.rmdir(dirpath)</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> temporary_directory() <span class="im">as</span> tempdir:</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Temporary directory created at </span><span class="sc">{</span>tempdir<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="timing-code-execution" class="level3" data-number="17.10.2">
<h3 data-number="17.10.2" class="anchored" data-anchor-id="timing-code-execution"><span class="header-section-number">17.10.2</span> Timing Code Execution</h3>
<div class="sourceCode" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> contextlib <span class="im">import</span> contextmanager</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="at">@contextmanager</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> timer():</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> time.time()</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">yield</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> time.time()</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Time taken: </span><span class="sc">{</span>end <span class="op">-</span> start<span class="sc">}</span><span class="ss"> seconds'</span>)</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> timer():</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">sum</span>([i <span class="op">**</span> <span class="dv">2</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10000</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="best-practices-3" class="level2" data-number="17.11">
<h2 data-number="17.11" class="anchored" data-anchor-id="best-practices-3"><span class="header-section-number">17.11</span> Best Practices</h2>
<ol type="1">
<li><strong>Use <code>contextmanager</code> for Simple Context Managers</strong>: Use the <code>contextmanager</code> decorator to create simple context managers using generator functions.</li>
<li><strong>Use <code>ExitStack</code> for Complex Context Managers</strong>: Use the <code>ExitStack</code> class for managing multiple context managers dynamically.</li>
<li><strong>Ensure Proper Cleanup</strong>: Always ensure that resources are properly cleaned up by using <code>try</code>/<code>finally</code> blocks or context managers.</li>
<li><strong>Suppress Exceptions Sparingly</strong>: Use the <code>suppress</code> function sparingly and only when you are sure that ignoring the exception is safe.</li>
</ol>
</section>
<section id="conclusion-4" class="level2" data-number="17.12">
<h2 data-number="17.12" class="anchored" data-anchor-id="conclusion-4"><span class="header-section-number">17.12</span> Conclusion</h2>
<p>The <code>contextlib</code> module in Python provides a suite of tools for working with context managers, making it easier to manage resources and ensure proper cleanup. By using <code>contextlib.contextmanager</code>, <code>closing</code>, <code>suppress</code>, <code>redirect_stdout</code>, <code>redirect_stderr</code>, and <code>ExitStack</code>, you can write more robust and maintainable code. Understanding and utilizing these tools will help you handle resource management tasks efficiently and effectively in your Python programs.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./11_python_testing.html" class="pagination-link" aria-label="Introduction to Testing in Python">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Introduction to Testing in Python</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./13_python_lib_for_sys_design.html" class="pagination-link" aria-label="Introduction to Python Libraries for System Design">
        <span class="nav-page-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Introduction to Python Libraries for System Design</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>